<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
	<div th:fragment="sidebarnav">
		<!-- Left side column. contains the logo and sidebar -->
		<aside class="main-sidebar">

			<!-- sidebar: style can be found in sidebar.less -->
			<section class="sidebar">

				<!-- Sidebar user panel (optional) -->
				<div class="user-panel">
					<div class="pull-left image">
						<img src="../../lib/dist/img/avatar.png" class="img-circle"
							alt="User Image" />
					</div>
					<div class="pull-left info">
						<p>Database Admin</p>
						 <a href="#" th:href="@{/login(logout='true')}">Sign out</a>
					</div>
				</div>

				<!-- Sidebar Menu -->
				<ul class="sidebar-menu" data-widget="tree">
					<li class="header">MAIN NAVIGATION</li>
					<!-- Optionally, you can add icons to the links -->

					<!-- activity menu-tree -->
					<li class="treeview"><a href="#"> <i class="fa fa-film"></i><span>Films</span>
							<span class="pull-right-container"> <i
								class="fa fa-angle-left pull-right"></i> <span
								class="label label-primary pull-right" th:text="${filmsCount}">4</span>
						</span>
					</a>
						<ul class="treeview-menu">
							<li><a href="#" th:href="@{/home}"><i
									class="fa fa-list-ul"></i> List</a></li>
							<li><a href="#" th:href="@{/sakila/films/film}"><i
									class="fa fa-plus-square"></i> New</a></li>
						</ul></li>

				</ul>
				<!-- /.sidebar-menu -->
			</section>
			<!-- /.sidebar -->
		</aside>
	</div>
	<script>
		//Variable to save new status of the user
		var user_status;
		//assign update status of the user to the click event of the button_online
		$('#button_online').click(function(e) {
			user_status = 'online';
			updateStatus(userEmail, user_status);
		});
		//assign update status of the user to the click event of the button_offline
		$('#button_offline').click(function(event) {
			user_status = 'offline';
			updateStatus(userEmail, user_status);
		});
		function updateStatus(uEmail, newStatus) {
			$.ajax({
				url : "/admin/user/updateStatus",
				type : "GET",
				data : {
					email : uEmail,
					userStatus : newStatus
				},
				dataType : "html",
				success : function(data) {
					location.reload();
				}
			});
		}
	</script>
</body>
</html>
